<!DOCTYPE html>
<html>
<script src='https://d3js.org/d3.v5.min.js'></script>
<style> circle {fill: lightblue; stroke: black;} </style>
<body onload='init()'>

<button class = "button" id = "2015">2015</button>
<button class = "button" id = "2016">2016</button>
<button class = "button" id = "2017">2017</button>
<button class = "button" id = "2018">2018</button>
<button class = "button" id = "2019">2019</button>

<svg width=800 height=800>
</svg>
<script>

async function init() {
const data2015 = await d3.csv('https://raw.githubusercontent.com/hughhhuang/hughhhuang.github.io/main/world_happiness_data/2015.csv');
const data2016 = await d3.csv('https://raw.githubusercontent.com/hughhhuang/hughhhuang.github.io/main/world_happiness_data/2016.csv');
const data2017 = await d3.csv('https://raw.githubusercontent.com/hughhhuang/hughhhuang.github.io/main/world_happiness_data/2017.csv');
const data2018 = await d3.csv('https://raw.githubusercontent.com/hughhhuang/hughhhuang.github.io/main/world_happiness_data/2018.csv');
const data2019 = await d3.csv('https://raw.githubusercontent.com/hughhhuang/hughhhuang.github.io/main/world_happiness_data/2019.csv');

var margin = {top: 30, right: 30, bottom: 30, left: 60},
    width = 550,
    height = 550;


var svg = d3.select("svg")

var x = d3.scaleLinear().domain([0,2]).range([0,550]) 
var y = d3.scaleLinear().domain([0,10]).range([550,0]) 

svg.append("g").attr("transform","translate(" + margin.left + "," + margin.top + ")").selectAll("circle")
    .data(data2015)
    .enter()
    .append("circle")
      .attr("cx", function (d) { return x(+d['Economy (GDP per Capita)']); } )
      .attr("cy", function (d) { return y(+d['Happiness Score']); } )
      .attr("r", 10)


svg.append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")")
    .call(d3.axisLeft(y));

svg.append("g")
    .attr("transform", "translate(" + margin.left + "," + (height + margin.top) + ")") 
    .call(d3.axisBottom(x));

document.getElementById("2015").onclick = function() {disp2015()};

function disp2015() {
    svg.selectAll("circle").remove()
    
    svg.append("g")
    .attr("transform", "translate(" + margin.left + "," + (height + margin.top) + ")") 
    .call(d3.axisBottom(x));

    svg.append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")")
    .call(d3.axisLeft(y));

    svg.append("g").attr("transform","translate(" + margin.left + "," + margin.top + ")").selectAll("circle")
    .data(data2015)
    .enter()
    .append("circle")
      .attr("cx", function (d) { return x(+d['Economy (GDP per Capita)']); } )
      .attr("cy", function (d) { return y(+d['Happiness Score']); } )
      .attr("r", 10)
}

document.getElementById("2016").onclick = function() {disp2016()};

function disp2016() {
    svg.selectAll("circle").remove()
    
    svg.append("g")
    .attr("transform", "translate(" + margin.left + "," + (height + margin.top) + ")") 
    .call(d3.axisBottom(x));

    svg.append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")")
    .call(d3.axisLeft(y));

    svg.append("g").attr("transform","translate(" + margin.left + "," + margin.top + ")").selectAll("circle")
    .data(data2016)
    .enter()
    .append("circle")
      .attr("cx", function (d) { return x(+d['Economy (GDP per Capita)']); } )
      .attr("cy", function (d) { return y(+d['Happiness Score']); } )
      .attr("r", 10)
}

document.getElementById("2017").onclick = function() {disp2017()};

function disp2017() {
    svg.selectAll("circle").remove()
    
    svg.append("g")
    .attr("transform", "translate(" + margin.left + "," + (height + margin.top) + ")") 
    .call(d3.axisBottom(x));

    svg.append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")")
    .call(d3.axisLeft(y));

    svg.append("g").attr("transform","translate(" + margin.left + "," + margin.top + ")").selectAll("circle")
    .data(data2017)
    .enter()
    .append("circle")
      .attr("cx", function (d) { return x(+d['Economy..GDP.per.Capita.']); } )
      .attr("cy", function (d) { return y(+d['Happiness.Score']); } )
      .attr("r", 10)
}

document.getElementById("2018").onclick = function() {disp2018()};

function disp2018() {
    svg.selectAll("circle").remove()
    
    svg.append("g")
    .attr("transform", "translate(" + margin.left + "," + (height + margin.top) + ")") 
    .call(d3.axisBottom(x));

    svg.append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")")
    .call(d3.axisLeft(y));

    svg.append("g").attr("transform","translate(" + margin.left + "," + margin.top + ")").selectAll("circle")
    .data(data2018)
    .enter()
    .append("circle")
      .attr("cx", function (d) { return x(+d['GDP per capita']); } )
      .attr("cy", function (d) { return y(+d['Score']); } )
      .attr("r", 10)
}

document.getElementById("2019").onclick = function() {disp2019()};

function disp2019() {
    svg.selectAll("circle").remove()
    
    svg.append("g")
    .attr("transform", "translate(" + margin.left + "," + (height + margin.top) + ")") 
    .call(d3.axisBottom(x));

    svg.append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")")
    .call(d3.axisLeft(y));

    svg.append("g").attr("transform","translate(" + margin.left + "," + margin.top + ")").selectAll("circle")
    .data(data2019)
    .enter()
    .append("circle")
      .attr("cx", function (d) { return x(+d['GDP per capita']); } )
      .attr("cy", function (d) { return y(+d['Score']); } )
      .attr("r", 10)
}


}



</script>
</body>
</html>